execute if data block -290 15 58 {Text2:'{"bold":true,"color":"aqua","extra":[{"bold":false,"color":"yellow","text":"@Button"}],"text":"After: "}'} run schedule function library:game/loop/target 7
execute if data block -290 15 58 {Text2:'{"bold":true,"color":"aqua","extra":[{"bold":false,"color":"yellow","text":"@Button"}],"text":"After: "}'} run schedule function library:game/loop/entity/target 7 append
execute as @e[tag=3vent,tag=button,tag=mgc-button.pre] at @s run tp @e[dy=1,limit=1,tag=mgc_temp] ~ -1000 ~
execute if data block -290 15 58 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"Interaction"}'} unless entity @e[distance=..0.06,tag=3vent,tag=mgc_temp] run summon magma_cube ~ ~ ~ {Team:mgc-button,Tags:[3vent,mgc_temp],Size:1,NoAI:1,Invulnerable:1,Silent:1,PersistenceRequired:1,DeathLootTable:""}
#cosmetics
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:purple_dye"} run particle portal ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:magenta_dye"} run particle witch ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:white_dye"} run summon lightning_bolt ~ ~1 ~
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:black_dye"} run particle smoke ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:orange_dye"} run particle lava ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:red_dye"} run particle heart ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:lime_dye"} run particle composter ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:green_dye"} run particle note ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:blue_dye"} run particle warped_spore ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:cyan_dye"} run particle splash ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:light_blue_dye"} run particle soul_fire_flame ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:yellow_dye"} run particle flame ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:gray_dye"} run particle explosion ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:light_gray_dye"} run particle cloud ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
execute positioned ~ ~-1 ~ if data entity @e[limit=1,sort=random,tag=3vent,tag=particle,distance=..1] ArmorItems[0].tag{id:"minecraft:brown_dye"} run particle block dirt ~ ~0.5 ~ 0 0 0 0.1 5 force @a[scores={mgc=1..}]
tag @e[tag=3vent,tag=button] remove mgc-button.pre
execute if data block -290 15 59 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button2"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"Previous"}'} run tag @s add mgc-button.pre
execute if data block -290 15 59 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button2"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"Random"}'} run tag @e[limit=1,sort=random,tag=3vent,tag=button] add mgc-button.pre
execute if data block -290 15 59 {Text3:'{"bold":true,"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button2"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"No Targets"}'} run tag @s add mgc-button.pre
schedule function library:game/loop/entity 7
execute as @e[tag=3vent,tag=entity,tag=target] at @s run function library:game/loop/target
function library:game/loop/particle
schedule function library:game/loop/clear 5
execute if data block -306 15 54 {Text3:'{"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Button"}'} if data block -307 15 54 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"All players"}'} run scoreboard players add @a[scores={mgc=-1..}] mgc-1.3 1
execute if data block -306 15 54 {Text3:'{"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Button"}'} if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Nearest"}'} run scoreboard players add @p[scores={mgc=-1..}] mgc-1.3 1
execute if data block -306 15 54 {Text3:'{"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Button"}'} if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Random"}'} run scoreboard players add @r[scores={mgc=-1..}] mgc-1.3 1

execute if data block -306 15 54 {Text3:'{"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Trigger"}'} if entity @e[tag=target,tag=tr.3] if data block -307 15 54 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"All players"}'} run scoreboard players add @a[scores={mgc=-1..}] mgc-1.3 1
execute if data block -306 15 54 {Text3:'{"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Trigger"}'} if entity @e[tag=target,tag=tr.3] if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Nearest"}'} run scoreboard players add @p[scores={mgc=-1..}] mgc-1.3 1
execute if data block -306 15 54 {Text3:'{"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Trigger"}'} if entity @e[tag=target,tag=tr.3] if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Random"}'} run scoreboard players add @r[scores={mgc=-1..}] mgc-1.3 1
tag @s add press