execute if data block -290 15 58 {Text2:'{"bold":true,"color":"aqua","extra":[{"bold":false,"color":"yellow","text":"@Button"}],"text":"After: "}'} run function library:game/loop/target
execute if data block -290 15 58 {Text2:'{"bold":true,"color":"aqua","extra":[{"bold":false,"color":"yellow","text":"@Button"}],"text":"After: "}'} run function library:game/loop/entity/target
execute as @e[tag=3vent,tag=button,tag=mgc-button.pre] at @s run tp @e[dy=1,limit=1,tag=mgc_temp] ~ -1000 ~
execute if data block -290 15 58 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"Interaction"}'} unless entity @e[distance=..0.06,tag=3vent,tag=mgc_temp] run summon magma_cube ~ ~ ~ {Team:mgc-button,Tags:[3vent,mgc_temp],Size:1,NoAI:1,Invulnerable:1,Silent:1,PersistenceRequired:1,DeathLootTable:""}
#externalities
execute if entity @e[tag=3vent,tag=particle,tag=!target] run function library:game/loop/external/particle
execute if entity @e[tag=3vent,tag=sound,tag=!target] run function library:game/loop/external/sound
tag @e[tag=3vent,tag=button] remove mgc-button.pre
execute if data block -290 15 59 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button2"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"Previous"}'} run tag @s add mgc-button.pre
execute if data block -290 15 59 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button2"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"Random"}'} run tag @e[limit=1,sort=random,tag=3vent,tag=button] add mgc-button.pre
execute if data block -290 15 59 {Text3:'{"bold":true,"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/button2"},"extra":[{"bold":false,"color":"yellow","text":" >>"}],"text":"No Targets"}'} run tag @s add mgc-button.pre
schedule function library:game/loop/entity 7
execute if entity @e[tag=3vent,tag=entity,tag=target,tag=tr.3] run function library:game/loop/target
execute if entity @e[tag=3vent,tag=entity,tag=target,tag=tr.3] run function library:game/loop/entity/target
schedule function library:game/loop/clear 5
execute if data block -306 15 54 {Text3:'{"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Button"}'} if data block -307 15 54 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"All players"}'} run execute as @a[scores={mgc=-1..}] run function library:game/set/score
execute if data block -306 15 54 {Text3:'{"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Button"}'} if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Nearest"}'} run execute as @p[scores={mgc=-1..}] run function library:game/set/score
execute if data block -306 15 54 {Text3:'{"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Button"}'} if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Random"}'} run execute as @r[scores={mgc=-1..}] run function library:game/set/score

execute if data block -306 15 54 {Text3:'{"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Trigger"}'} if entity @e[tag=target,tag=tr.3] if data block -307 15 54 {Text3:'{"bold":true,"color":"yellow","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"All players"}'} run execute as @a[scores={mgc=-1..}] run function library:game/set/score
execute if data block -306 15 54 {Text3:'{"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Trigger"}'} if entity @e[tag=target,tag=tr.3] if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Nearest"}'} run execute as @p[scores={mgc=-1..}] run function library:game/set/score
execute if data block -306 15 54 {Text3:'{"color":"white","clickEvent":{"action":"run_command","value":"/function library:game/toggle/criterion"},"text":"@Trigger"}'} if entity @e[tag=target,tag=tr.3] if data block -307 15 54 {Text3:'{"bold":true,"color":"gold","clickEvent":{"action":"run_command","value":"/function library:game/toggle/selector2"},"text":"Random"}'} run execute as @r[scores={mgc=-1..}] run function library:game/set/score
execute if entity @e[tag=3vent,tag=button,tag=press] if data block -290 15 60 {Text2:'{"bold":true,"color":"aqua","extra":[{"bold":false,"color":"yellow","text":"@Button"}],"text":"Until: "}'} run tag @e[tag=3vent,tag=button,tag=!press] add press
tag @s add press